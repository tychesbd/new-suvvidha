"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[501],{501:(e,t,i)=>{i.r(t),i.d(t,{default:()=>J});var r=i(5043),a=i(2420),n=i(6446),s=i(5865),o=i(1906),l=i(3336),c=i(9650),d=i(1806),h=i(4882),p=i(8076),m=i(3460),u=i(8483),A=i(7392),x=i(35),g=i(6600),v=i(5316),b=i(8903),j=i(5795),y=i(8577),k=i(8587),w=i(8168),f=i(8387),C=i(8610),S=i(7266),$=i(6803),P=i(3064),z=i(4535),B=i(8206),N=i(2532),L=i(2372);function M(e){return(0,L.Ay)("MuiSwitch",e)}const I=(0,N.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var R=i(579);const W=["className","color","edge","size","sx"],D=(0,z.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.root,i.edge&&t[`edge${(0,$.A)(i.edge)}`],t[`size${(0,$.A)(i.size)}`]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${I.thumb}`]:{width:16,height:16},[`& .${I.switchBase}`]:{padding:4,[`&.${I.checked}`]:{transform:"translateX(16px)"}}}}]}),T=(0,z.Ay)(P.A,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:i}=e;return[t.switchBase,{[`& .${I.input}`]:t.input},"default"!==i.color&&t[`color${(0,$.A)(i.color)}`]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${"light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${I.checked}`]:{transform:"translateX(20px)"},[`&.${I.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${"light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${I.checked} + .${I.track}`]:{opacity:.5},[`&.${I.disabled} + .${I.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:""+("light"===t.palette.mode?.12:.2)},[`& .${I.input}`]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,S.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter((e=>{let[,t]=e;return t.main&&t.light})).map((e=>{let[i]=e;return{props:{color:i},style:{[`&.${I.checked}`]:{color:(t.vars||t).palette[i].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[i].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:(0,S.X4)(t.palette[i].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${I.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${i}DisabledColor`]:`${"light"===t.palette.mode?(0,S.a)(t.palette[i].main,.62):(0,S.e$)(t.palette[i].main,.55)}`}},[`&.${I.checked} + .${I.track}`]:{backgroundColor:(t.vars||t).palette[i].main}}}}))]}})),q=(0,z.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${"light"===t.palette.mode?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:""+("light"===t.palette.mode?.38:.3)}})),O=(0,z.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),_=r.forwardRef((function(e,t){const i=(0,B.b)({props:e,name:"MuiSwitch"}),{className:r,color:a="primary",edge:n=!1,size:s="medium",sx:o}=i,l=(0,k.A)(i,W),c=(0,w.A)({},i,{color:a,edge:n,size:s}),d=(e=>{const{classes:t,edge:i,size:r,color:a,checked:n,disabled:s}=e,o={root:["root",i&&`edge${(0,$.A)(i)}`,`size${(0,$.A)(r)}`],switchBase:["switchBase",`color${(0,$.A)(a)}`,n&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=(0,C.A)(o,M,t);return(0,w.A)({},t,l)})(c),h=(0,R.jsx)(O,{className:d.thumb,ownerState:c});return(0,R.jsxs)(D,{className:(0,f.A)(d.root,r),sx:o,ownerState:c,children:[(0,R.jsx)(T,(0,w.A)({type:"checkbox",icon:h,checkedIcon:h,ref:t,ownerState:c},l,{classes:(0,w.A)({},d,{root:d.switchBase})})),(0,R.jsx)(q,{className:d.track,ownerState:c})]})}));var E=i(9347),X=i(2505),V=i(3159),H=i(3471),U=i(6213),F=i(9456);const G=(0,z.Ay)(a.A)((e=>{let{theme:t}=e;return{fontWeight:"bold",backgroundColor:t.palette.primary.light,color:t.palette.common.white}})),J=()=>{const{userInfo:e}=(0,F.d4)((e=>e.auth)),[t,i]=(0,r.useState)([]),[k,w]=(0,r.useState)(!1),[f,C]=(0,r.useState)(null),[S,$]=(0,r.useState)(!1),[P,z]=(0,r.useState)("add"),[B,N]=(0,r.useState)({name:"",price:"",description:"",bookingLimit:"",validityPeriod:"",isActive:!0}),[L,M]=(0,r.useState)(!1),[I,W]=(0,r.useState)(null),D=async()=>{try{w(!0);const t={headers:{Authorization:`Bearer ${e.token}`}},{data:r}=await U.A.get("/api/subscription-plans/admin",t);i(r),C(null)}catch(t){C(t.response&&t.response.data.message?t.response.data.message:t.message)}finally{w(!1)}};(0,r.useEffect)((()=>{D()}),[e]);const T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;z(e),N("edit"===e&&t?{_id:t._id,name:t.name,price:t.price,description:t.description,bookingLimit:t.bookingLimit,validityPeriod:t.validityPeriod,isActive:t.isActive}:{name:"",price:"",description:"",bookingLimit:"",validityPeriod:"",isActive:!0}),$(!0)},q=()=>{$(!1)},O=e=>{const{name:t,value:i,type:r,checked:a}=e.target;N({...B,[t]:"checkbox"===r?a:i})},J=()=>{M(!1),W(null)};return(0,R.jsxs)(n.A,{children:[(0,R.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,R.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:"Subscription Plans"}),(0,R.jsx)(o.A,{variant:"contained",color:"primary",startIcon:(0,R.jsx)(X.A,{}),onClick:()=>T("add"),children:"Add New Plan"})]}),f&&(0,R.jsx)(l.A,{sx:{p:2,mb:3,bgcolor:"error.light",color:"error.dark"},children:(0,R.jsx)(s.A,{children:f})}),(0,R.jsx)(c.A,{component:l.A,elevation:2,children:(0,R.jsxs)(d.A,{children:[(0,R.jsx)(h.A,{children:(0,R.jsxs)(p.A,{children:[(0,R.jsx)(G,{children:"Name"}),(0,R.jsx)(G,{children:"Price (\u20b9)"}),(0,R.jsx)(G,{children:"Description"}),(0,R.jsx)(G,{children:"Booking Limit"}),(0,R.jsx)(G,{children:"Validity (days)"}),(0,R.jsx)(G,{children:"Status"}),(0,R.jsx)(G,{children:"Actions"})]})}),(0,R.jsxs)(m.A,{children:[t.map((e=>(0,R.jsxs)(p.A,{children:[(0,R.jsx)(a.A,{children:e.name}),(0,R.jsxs)(a.A,{children:["\u20b9",e.price]}),(0,R.jsx)(a.A,{children:e.description}),(0,R.jsx)(a.A,{children:e.bookingLimit}),(0,R.jsx)(a.A,{children:e.validityPeriod}),(0,R.jsx)(a.A,{children:e.isActive?(0,R.jsx)(u.A,{title:"Active",children:(0,R.jsx)(n.A,{component:"span",sx:{color:"success.main",fontWeight:"bold"},children:"Active"})}):(0,R.jsx)(u.A,{title:"Inactive",children:(0,R.jsx)(n.A,{component:"span",sx:{color:"text.disabled"},children:"Inactive"})})}),(0,R.jsxs)(a.A,{children:[(0,R.jsx)(u.A,{title:"Edit",children:(0,R.jsx)(A.A,{onClick:()=>T("edit",e),children:(0,R.jsx)(V.A,{color:"primary"})})}),(0,R.jsx)(u.A,{title:"Delete",children:(0,R.jsx)(A.A,{onClick:()=>(e=>{W(e),M(!0)})(e),children:(0,R.jsx)(H.A,{color:"error"})})})]})]},e._id))),0===t.length&&(0,R.jsx)(p.A,{children:(0,R.jsx)(a.A,{colSpan:7,align:"center",children:"No subscription plans found. Create your first plan!"})})]})]})}),(0,R.jsxs)(x.A,{open:S,onClose:q,maxWidth:"md",fullWidth:!0,children:[(0,R.jsx)(g.A,{children:"add"===P?"Add New Subscription Plan":"Edit Subscription Plan"}),(0,R.jsx)(v.A,{children:(0,R.jsxs)(b.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,R.jsx)(b.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(j.A,{name:"name",label:"Plan Name",value:B.name,onChange:O,fullWidth:!0,required:!0,margin:"dense"})}),(0,R.jsx)(b.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(j.A,{name:"price",label:"Price (\u20b9)",type:"number",value:B.price,onChange:O,fullWidth:!0,required:!0,margin:"dense",inputProps:{min:0}})}),(0,R.jsx)(b.Ay,{item:!0,xs:12,children:(0,R.jsx)(j.A,{name:"description",label:"Description",value:B.description,onChange:O,fullWidth:!0,required:!0,margin:"dense",multiline:!0,rows:2})}),(0,R.jsx)(b.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(j.A,{name:"bookingLimit",label:"Booking Limit",type:"number",value:B.bookingLimit,onChange:O,fullWidth:!0,required:!0,margin:"dense",inputProps:{min:1},helperText:"Maximum number of bookings allowed"})}),(0,R.jsx)(b.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(j.A,{name:"validityPeriod",label:"Validity Period (days)",type:"number",value:B.validityPeriod,onChange:O,fullWidth:!0,required:!0,margin:"dense",inputProps:{min:1},helperText:"Subscription validity in days"})}),(0,R.jsx)(b.Ay,{item:!0,xs:12,children:(0,R.jsx)(y.A,{control:(0,R.jsx)(_,{checked:B.isActive,onChange:O,name:"isActive",color:"primary"}),label:"Active"})})]})}),(0,R.jsxs)(E.A,{children:[(0,R.jsx)(o.A,{onClick:q,color:"inherit",children:"Cancel"}),(0,R.jsx)(o.A,{onClick:async()=>{try{w(!0);const t={headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`}},i={...B,price:Number(B.price),bookingLimit:Number(B.bookingLimit),validityPeriod:Number(B.validityPeriod)};"add"===P?await U.A.post("/api/subscription-plans/admin",i,t):await U.A.put(`/api/subscription-plans/admin/${B._id}`,i,t),D(),q()}catch(t){C(t.response&&t.response.data.message?t.response.data.message:t.message)}finally{w(!1)}},color:"primary",variant:"contained",children:"add"===P?"Create":"Update"})]})]}),(0,R.jsxs)(x.A,{open:L,onClose:J,children:[(0,R.jsx)(g.A,{children:"Confirm Delete"}),(0,R.jsx)(v.A,{children:(0,R.jsxs)(s.A,{children:['Are you sure you want to delete the subscription plan "',null===I||void 0===I?void 0:I.name,'"? This action cannot be undone.']})}),(0,R.jsxs)(E.A,{children:[(0,R.jsx)(o.A,{onClick:J,color:"inherit",children:"Cancel"}),(0,R.jsx)(o.A,{onClick:async()=>{try{w(!0);const t={headers:{Authorization:`Bearer ${e.token}`}};await U.A.delete(`/api/subscription-plans/admin/${I._id}`,t),D(),J()}catch(t){C(t.response&&t.response.data.message?t.response.data.message:t.message)}finally{w(!1)}},color:"error",variant:"contained",children:"Delete"})]})]})]})}},2505:(e,t,i)=>{var r=i(4994);t.A=void 0;var a=r(i(39)),n=i(579);t.A=(0,a.default)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")}}]);
//# sourceMappingURL=501.2a641896.chunk.js.map